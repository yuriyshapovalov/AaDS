<Project DefaultTarget="BuildWithTests" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <BinPath>bin/csharp/</BinPath>
    <TestBinPath>tests/csharp/</TestBinPath>
  </PropertyGroup>

  <ItemGroup>
    <!-- Sorting -->
    <CSCodeSorting Include="../../src/sorting/**/csharp/*.cs" />
    <CSTestSorting Include="../../test/csharp/sorting/*.cs" />

    <CSTestHelper Include="../../test/csharp/_helper/*.cs" />
  </ItemGroup>

  <ItemGroup>
    <Reference Include="bin/csharp/Sorting.dll" />
    <Reference Include="tests/csharp/TestHelper.dll" />
  </ItemGroup>

  <Target Name="Build">
    <MakeDir Directories="$(BinPath)" Condition="!Exists('$(BinPath)')" />
    <Message Text="**********************************************************" />
    <Message Text="                         Build Libraries" />
    <Message Text="**********************************************************" />
    <Csc Sources="@(CSCodeSorting)"
         TargetType="library" 
         OutputAssembly="$(BinPath)Sorting.dll" />

  </Target>

  <Target Name="BuildTests">
    <MakeDir Directories="$(TestBinPath)" Condition="!Exists('$(TestBinPath)')" />
    <Message Text="**********************************************************" />
    <Message Text="                             Build Tests" />
    <Message Text="**********************************************************" />
    <Csc Sources="@(CSTestHelper)"
         TargetType="library"
         OutputAssembly="$(TestBinPath)TestHelper.dll" />

    <Csc Sources="@(CSCodeSorting)"
         TargetType="library"
         OutputAssembly="$(TestBinPath)Sorting.dll" />
    
    <Csc Sources="@(CSTestSorting)" 
         References="@(Reference)"
         TargetType="library" 
         OutputAssembly="$(TestBinPath)SortingTest.dll" />
    
  </Target>

  <Target Name="Clear">
    <Delete Files="$(BinaryPath)*.cs" />
  </Target>

  <Target Name="Rebuild" DependsOnTargets="Clean;Build" />

  <Target Name="BuildWithTests" DependsOnTargets="Build;BuildTests"></Target>
</Project>
